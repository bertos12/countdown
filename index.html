<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Der Schimmelreiter â€“ Countdown</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

html, body {
  width:100%;
  height:100%;
  font-family: Arial, Helvetica, sans-serif;
}

/* BACKGROUND */
body {
  min-height:100vh;
  background-image:url("schimmelreiter_desktop.jpg");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  overflow:hidden;
}

@media (max-width:768px) {
  body {
    background-image:url("schimmelreiter_mobil.jpg");
    background-position:top center;
  }
}

/* RAIN */
#rain {
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:2;
}

/* WRAPPER */
.countdown-wrapper {
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  padding-bottom:12vh;
  z-index:10;
}

/* GLASS BOX */
.glass-box {
  padding:16px 18px;
  background:rgba(20,20,30,0.55);
  backdrop-filter:blur(10px);
  border-radius:16px;
  color:#fff;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
}

/* COUNTDOWN */
.countdown {
  display:flex;
  gap:14px;
}

.time {
  display:flex;
  flex-direction:column;
  align-items:center;
  min-width:60px;
}

.time span {
  font-size:1.6rem;
  font-weight:bold;
}

.time label {
  font-size:0.7rem;
  opacity:0.8;
}

/* CHRISTMAS */
.christmas-box {
  font-size:1.4rem;
  font-weight:bold;
}

.christmas-glow {
  animation: glowPulse 3s ease-in-out infinite;
}

@keyframes glowPulse {
  0%,100% {
    box-shadow:
      0 0 12px rgba(255,80,80,0.5),
      0 0 28px rgba(255,120,80,0.35),
      0 0 55px rgba(255,200,120,0.25);
  }
  50% {
    box-shadow:
      0 0 22px rgba(255,100,100,0.8),
      0 0 45px rgba(255,160,100,0.6),
      0 0 80px rgba(255,220,160,0.5);
  }
}
</style>
</head>

<body>

<canvas id="rain"></canvas>

<div class="countdown-wrapper">

  <!-- ðŸŽ„ WEIHNACHT -->
  <div class="glass-box christmas-box" id="christmasBox" style="display:none;">
    ðŸŽ„ Frohe Weihnachten ðŸŽ„
  </div>

  <!-- â³ COUNTDOWN -->
  <div class="glass-box countdown">
    <div class="time"><span id="days">0</span><label>TAGE</label></div>
    <div class="time"><span id="hours">00</span><label>STD</label></div>
    <div class="time"><span id="minutes">00</span><label>MIN</label></div>
    <div class="time"><span id="seconds">00</span><label>SEK</label></div>
  </div>

</div>

<script>
/* =====================
   HELPERS
===================== */
function isMobile() {
  return window.innerWidth <= 768;
}

/* =====================
   RAIN
===================== */
const canvas = document.getElementById("rain");
const ctx = canvas.getContext("2d");

let w, h, drops = [];
const WIND_X = -4.0;
const GRAVITY_Y = 6.5;

function resize() {
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
  const density = Math.floor(w / (isMobile() ? 4 : 8));
  drops = Array.from({ length: density }, createDrop);
}
window.addEventListener("resize", resize);
resize();

function createDrop() {
  const vx = WIND_X + Math.random() * (isMobile() ? -1.6 : -1.2);
  const vy = isMobile()
    ? GRAVITY_Y + 3 + Math.random() * 3.5
    : GRAVITY_Y + Math.random() * 2.5;

  const len = isMobile()
    ? 20 + Math.random() * 30
    : 14 + Math.random() * 24;

  const mag = Math.hypot(vx, vy);
  let x, y;

  if (vy > 0 && vx < 0) {
    if (Math.random() < h / (w + h)) {
      x = Math.random() * w;
      y = -80;
    } else {
      x = w + 80;
      y = Math.random() * h;
    }
  } else {
    x = Math.random() * w;
    y = -80;
  }

  return { x, y, vx, vy, nx: vx/mag, ny: vy/mag, len };
}

function rain() {
  ctx.clearRect(0,0,w,h);
  ctx.strokeStyle = "rgba(180,190,255,0.55)";
  ctx.lineWidth = isMobile() ? 1.2 : 1;

  ctx.beginPath();
  for (const d of drops) {
    ctx.moveTo(d.x, d.y);
    ctx.lineTo(d.x - d.nx*d.len, d.y - d.ny*d.len);
    d.x += d.vx;
    d.y += d.vy;

    if (d.y > h+140 || d.x < -140 || d.x > w+140) {
      Object.assign(d, createDrop());
    }
  }
  ctx.stroke();
  requestAnimationFrame(rain);
}
rain();

/* =====================
   CHRISTMAS + COUNTDOWN
===================== */
const targetDate = new Date(2026,6,8,19,30,0);

function isChristmasToday() {
  const n = new Date();
  return n.getFullYear() === 2025 && n.getMonth() === 11 && n.getDate() === 24;
}

function updateChristmasBox() {
  const box = document.getElementById("christmasBox");
  if (isChristmasToday()) {
    box.style.display = "block";
    box.classList.add("christmas-glow");
  } else {
    box.style.display = "none";
    box.classList.remove("christmas-glow");
  }
}

function updateCountdown() {
  const diff = targetDate - new Date();

  document.getElementById("days").textContent =
    Math.max(0, Math.floor(diff / 86400000));

  document.getElementById("hours").textContent =
    String(Math.max(0, Math.floor(diff / 3600000) % 24)).padStart(2,"0");

  document.getElementById("minutes").textContent =
    String(Math.max(0, Math.floor(diff / 60000) % 60)).padStart(2,"0");

  document.getElementById("seconds").textContent =
    String(Math.max(0, Math.floor(diff / 1000) % 60)).padStart(2,"0");
}

updateChristmasBox();
updateCountdown();
setInterval(() => {
  updateChristmasBox();
  updateCountdown();
}, 1000);
</script>

</body>
</html>
